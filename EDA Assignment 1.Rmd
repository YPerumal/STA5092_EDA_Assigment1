---
title: "EDA Assigment 1"
author: "Yevashan Perumal"
date: "3/30/2021"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(lubridate)
```



##Part 1 - Data Wrangling


```{r Import Data q2}
# Second Import Nestling comes first
df1 <- read.csv("./Datasets/Data.Bourne_NestlingsAllData.csv", header = TRUE)
df1 <- tibble(df1)


# First import Fledgeling comes second
df2 <- read.csv("./Datasets/Data.Bourne_FledglingSurvival.csv", header = TRUE)
#Convert to tibble
df2 <- tibble(df2)



# Third Import
df3 <- read.csv("./Datasets/Data.Bourne_NestSuccess.csv", header = TRUE)
df3 <- tibble(df3)
```

```{r merge two datasets q3 }
head(df1,5)
# sum(is.na(df1$Date)) #No nulls in the date column
```
```{r  merge two datasets q3 }
head(df2,5)
# sum(is.na(df2$Date)) #No nulls in the date column
```

```{r}
head(df3,5)
```


```{r clean up dataframes q1.3}
df1 <- df1 %>% 
    rename(Group=GRP)%>% 
    mutate(Date = dmy(Date),
           TwoMonthsPrior =dmy(TwoMonthsPrior),
           IncDate =dmy(IncDate),
           HatchDate =dmy(HatchDate),
           FledgeDate =dmy(FledgeDate),
           FailDate =dmy(FailDate),
           IndepDate =dmy(IndepDate),
           X1YrDate =dmy(X1YrDate),
           X2YrDate =dmy(X2YrDate),
           Surv1Mass=as.numeric(Surv1Mass),
           BirdID = str_replace_all(BirdID, " ", ""),
           Group=str_replace_all(Group, " ", ""),
           Season=str_replace_all(Season, " ", ""),
           NestID=str_replace_all(NestID, " ", ""),
           GrpSizeAD=as.numeric(GrpSizeAD),
           GrpSizeTotal=as.numeric(GrpSizeTotal),
           X.Imm=as.numeric(X.Imm)
           )%>%
    arrange(BirdID,Date,Group,Season)
# Surv1Mass # Is a string,needs to be numeric. changed date type. remove whitespace.

df2 <- df2 %>%
    mutate(Date = dmy(Date),
           Surv1Mass=as.numeric(Surv1Mass),
           BirdID = str_replace_all(BirdID, " ", ""),
           Group=str_replace_all(Group, " ", ""),
           Season=str_replace_all(Season, " ", ""),
           NestID=str_replace_all(NestID, " ", ""),) %>% 
    arrange(BirdID,Date,Group,Season)

head(df1)

# NAs introduces by coercion
```
```{r merge q1.3}
Spiedbabbler <- df1%>% left_join(df2,by=c('Date','BirdID','Group','Season','NestID'))

Spiedbabbler <- df1%>% left_join(df2)

head(Spiedbabbler,5)
print(dim(df1))
print(dim(df2))
print(dim(Spiedbabbler))
#Nestling comes first!

```

##Part 2

```{r q2.1}
#Total Sample Size Per Year
Spiedbabbler %>%
    mutate(year=year(Date)) %>%
    select(c(year,BirdID))%>%
    group_by(year)%>%
    summarise(n = n())
    # summarise(sample_size==count(BirdID))

```

```{r q2.2 outliers}

```

```{r q2.3 }

```

```{r q2.4}

```

```{r q2.5}

```

```{r q2.6}

```

```{r q2.7}

```

